(this["webpackJsonpexchange-app"]=this["webpackJsonpexchange-app"]||[]).push([[0],{14:function(e,t,n){e.exports=n(43)},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),u=n.n(c),o=n(3),l=n(1),s={USD:"US-Dollar",EUR:"Euro",GBP:"Pound"},i=n(2),f=n.n(i),m=n(4),g=Object(l.atomFamily)({key:"pocketState",default:0}),v=Object(l.selector)({key:"pocketListState",get:function(e){var t=e.get;return Object.entries(s).map((function(e){var n=Object(o.a)(e,2),a=n[0];return{currency:a,name:n[1],amount:t(g(a))}}))}}),b=Object(l.selector)({key:"pocketOriginState",get:function(e){var t=e.get;return t(g(t(P)))},set:function(e,t){var n=e.set,a=e.get;return n(g(a(P)),t)}}),p=Object(l.selector)({key:"pocketDestinationState",get:function(e){var t=e.get;return t(g(t(D)))},set:function(e,t){var n=e.set,a=e.get;return n(g(a(D)),t)}}),O=function(e){var t=e.set,n=e.snapshot;return Object(m.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPromise(D);case 2:a=e.sent,t(P,a);case 4:case"end":return e.stop()}}),e)})))},j=Object(l.atomFamily)({key:"exchangeRateState",default:{exchange:{USD:0,EUR:0,GBP:0},lastUpdate:null}}),E=Object(l.selector)({key:"exchangeEnabledState",get:function(e){var t=e.get,n=t(R),a=t(b),r=t(y);return n>0&&a>n&&!!r}}),h=Object(l.selector)({key:"currentExchangeRateState",get:function(e){var t=e.get,n=t(P),a=t(D);return t(j(n)).exchange[a]}}),y=Object(l.selector)({key:"lastUpdateCurrentExchangeRateState",get:function(e){var t=e.get,n=t(P);return t(j(n)).lastUpdate}}),d=function(e){var t=e.set,n=e.snapshot;return Object(m.a)(f.a.mark((function e(){var a,r,c,u,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPromise(P);case 2:return a=e.sent,e.prev=3,e.next=6,fetch("https://api.exchangeratesapi.io/latest?base=".concat(a));case 6:return r=e.sent,e.next=9,r.json();case 9:c=e.sent,u=c.rates,o=c.date,t(j(a),{exchange:u,lastUpdate:o}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error("There was an error while trying to get exchange Rates ...");case 18:case"end":return e.stop()}}),e,null,[[3,15]])})))},k=Object(l.atom)({key:"amountState",default:[0,0]}),x=function(e){var t=e?0:1,n=e?"amountOriginState":"amountDestinationState";return Object(l.selector)({key:n,get:function(e){return(0,e.get)(k)[t]},set:function(t,n){var a=t.set,r=t.get;if(n instanceof l.DefaultValue)return a(k,n);var c=r(h);a(k,e?[n,n*c]:[n/c,n])}})},R=x(!0),S=x(!1),C=function(e){var t=e.set,n=e.snapshot,a=e.reset;return Object(m.a)(f.a.mark((function e(){var r,c,u,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPromise(b);case 2:return r=e.sent,e.next=5,n.getPromise(p);case 5:return c=e.sent,e.next=8,n.getPromise(R);case 8:return u=e.sent,e.next=11,n.getPromise(S);case 11:o=e.sent,t(b,r-u),t(p,c+o),a(R),a(S);case 16:case"end":return e.stop()}}),e)})))},U=Object(l.atom)({key:"currencyState",default:["USD","EUR"]}),w=function(e){var t=e?0:1,n=e?"currencyOriginState":"currencyDestinationState";return Object(l.selector)({key:n,get:function(e){return(0,e.get)(U)[t]},set:function(e,n){var a=e.set,r=e.get;if(n instanceof l.DefaultValue)return a(U,n);var c=Array.from(r(U));if(c.includes(n))return a(U,Array.from(r(U)).reverse()),a(k,Array.from(r(k)).reverse());c[t]=n,a(U,c)}})},P=w(!0),D=w(!1),V=function(){return!1},A=function(e){var t=e.onChange,n=void 0===t?V:t,a=e.currency,c=Object(l.useRecoilValue)(v),u=Object(l.useRecoilValue)(g(a));return r.a.createElement("div",null,r.a.createElement("select",{value:a,onChange:function(e){return n(e.currentTarget.value)}},c.map((function(e){var t=a!==e.currency;return r.a.createElement("option",{value:e.currency,key:e.currency},e.name," ",t&&"- ".concat(e.amount))}))),u)},B=function(){var e=Object(l.useRecoilValue)(E),t=Object(l.useRecoilCallback)(C);return r.a.createElement("button",{onClick:t,disabled:!e},"Exchange")},F=function(e){var t=e.onChange,n=void 0===t?V:t,a=e.amount;return r.a.createElement("span",null,r.a.createElement("input",{type:"number",value:a,onChange:function(e){var t=e.currentTarget.value,a=parseFloat(t)||0;n(a)}}),r.a.createElement("button",{onClick:function(){return n(0)}},"Clear"))},G=function(){var e=Object(l.useRecoilValue)(h),t=Object(l.useRecoilValue)(y),n=Object(l.useRecoilValue)(P),c=Object(l.useRecoilValue)(D),u=Object(l.useRecoilCallback)(d);return t||u(),function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}),[t])}((function(){u()}),1e4),r.a.createElement("span",null,"1 ",n," = ",e," ",c)},I=function(){var e=Object(l.useRecoilCallback)(O);return r.a.createElement("button",{onClick:e},"Swap Pockets")},T=function(){var e=Object(l.useRecoilValue)(y);return r.a.createElement("div",null,"Last Update Exchange Rate: ",e)},J=function(){var e=Object(l.useRecoilState)(P),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(l.useRecoilState)(D),u=Object(o.a)(c,2),s=u[0],i=u[1],f=Object(l.useRecoilState)(R),m=Object(o.a)(f,2),g=m[0],v=m[1],b=Object(l.useRecoilState)(S),p=Object(o.a)(b,2),O=p[0],j=p[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"Exchange App"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(A,{currency:n,onChange:a}),r.a.createElement(F,{amount:g,onChange:v})),r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement(G,null)),r.a.createElement("div",null,r.a.createElement(A,{currency:s,onChange:i}),r.a.createElement(F,{amount:O,onChange:j})),r.a.createElement(B,null),r.a.createElement(T,null))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.RecoilRoot,{initializeState:function(e){var t=e.set;t(g("EUR"),100),t(g("USD"),50),t(g("GBP"),0)}},r.a.createElement(J,null))),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.72e41847.chunk.js.map